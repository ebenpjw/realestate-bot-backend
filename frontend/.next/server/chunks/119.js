exports.id=119,exports.ids=[119],exports.modules={39898:(e,t,a)=>{Promise.resolve().then(a.bind(a,78143)),Promise.resolve().then(a.bind(a,39130)),Promise.resolve().then(a.bind(a,85999))},41223:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,12994,23)),Promise.resolve().then(a.t.bind(a,96114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,79671,23)),Promise.resolve().then(a.t.bind(a,41868,23)),Promise.resolve().then(a.t.bind(a,84759,23))},56512:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,79404,23))},78143:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{Providers:()=>f});var r=a(10326),n=a(17577),o=a(57963),i=a(17610),l=a(45922),c=a(18202),d=a(2659),u=a(44976),m=a(14831),h=a(96897),p=a(33265),g=e([i]);i=(g.then?(await g)():g)[0];let x=new d.S({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:(e,t)=>t?.status!==401&&t?.status!==403&&e<3,refetchOnWindowFocus:!1,refetchOnReconnect:"always"},mutations:{retry:1}}});function f({children:e}){let[t,a]=(0,n.useState)(!1);return r.jsx(u.aH,{client:x,children:r.jsx(m.f,{attribute:"class",defaultTheme:"light",enableSystem:!0,disableTransitionOnChange:!0,children:r.jsx(h.pn,{delayDuration:300,children:r.jsx(o.H,{children:r.jsx(c.z,{children:r.jsx(l.k,{children:(0,r.jsxs)(i.w,{children:[e,t&&!1]})})})})})})})}(0,p.default)(async()=>{},{loadableGenerated:{modules:["app\\providers.tsx -> @tanstack/react-query-devtools/build/modern/production.js"]},ssr:!1}),s()}catch(e){s(e)}})},39130:(e,t,a)=>{"use strict";a.d(t,{OfflineIndicator:()=>g,PWAInstallPrompt:()=>p,y:()=>f});var s=a(10326),r=a(17577),n=a(85999);function o(){let[e,t]=(0,r.useState)({isInstallable:!1,isInstalled:!1,isOffline:!1,isUpdateAvailable:!1,notificationPermission:"default",pushSubscription:null}),[a,s]=(0,r.useState)(null),[o,i]=(0,r.useState)(null);(0,r.useCallback)(async()=>{if("serviceWorker"in navigator)try{let e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});return i(e),e.addEventListener("updatefound",()=>{let a=e.installing;a&&a.addEventListener("statechange",()=>{"installed"===a.state&&navigator.serviceWorker.controller&&(t(e=>({...e,isUpdateAvailable:!0})),n.A.info("App Update Available",{description:"A new version is ready. Refresh to update.",action:{label:"Refresh",onClick:()=>window.location.reload()}}))})}),console.log("Service Worker registered successfully"),e}catch(e){console.error("Service Worker registration failed:",e)}return null},[]);let l=(0,r.useCallback)(async()=>{if(a)try{await a.prompt();let e=await a.userChoice;"accepted"===e.outcome&&(t(e=>({...e,isInstalled:!0,isInstallable:!1})),s(null),n.A.success("App Installed",{description:"PropertyHub has been added to your home screen!"}))}catch(e){console.error("PWA installation failed:",e),n.A.error("Installation Failed",{description:"Unable to install the app. Please try again."})}},[a]),c=(0,r.useCallback)(async()=>{if("Notification"in window)try{let e=await Notification.requestPermission();return t(t=>({...t,notificationPermission:e})),"granted"===e?n.A.success("Notifications Enabled",{description:"You will now receive push notifications."}):n.A.error("Notifications Denied",{description:"You can enable notifications in your browser settings."}),e}catch(e){console.error("Notification permission request failed:",e)}return"denied"},[]),d=(0,r.useCallback)(async()=>{if(!o)return console.error("Service Worker not registered"),null;try{let e=await o.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:"your-vapid-public-key"});return t(t=>({...t,pushSubscription:e})),await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify(e)}),n.A.success("Push Notifications Enabled",{description:"You will receive real-time updates."}),e}catch(e){return console.error("Push subscription failed:",e),n.A.error("Push Notifications Failed",{description:"Unable to enable push notifications."}),null}},[o]),u=(0,r.useCallback)(async()=>{if(e.pushSubscription)try{await e.pushSubscription.unsubscribe(),t(e=>({...e,pushSubscription:null})),await fetch("/api/push/unsubscribe",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`}}),n.A.success("Push Notifications Disabled")}catch(e){console.error("Push unsubscription failed:",e)}},[e.pushSubscription]);return(0,r.useCallback)(()=>{let e=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");t(t=>({...t,isInstalled:e}))},[]),{...e,installPWA:l,requestNotificationPermission:c,subscribeToPush:d,unsubscribeFromPush:u,serviceWorkerRegistration:o}}var i=a(26049),l=a(72591),c=a(37740),d=a(59675),u=a(42553),m=a(90772),h=a(33071);function p({onDismiss:e}){let{isInstallable:t,isInstalled:a,isOffline:n,notificationPermission:p,installPWA:g,requestNotificationPermission:f,subscribeToPush:x}=o(),[b,y]=(0,r.useState)(!1),[w,v]=(0,r.useState)("install"),j=()=>{y(!0),e?.()},N=async()=>{await g(),v("notifications")},A=async()=>{"granted"===await f()&&await x(),v("complete")};return b||a||!t?null:s.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:w-96",children:(0,s.jsxs)(h.Zb,{className:"p-6 shadow-lg border-2 border-primary-200 bg-gradient-to-br from-primary-50 to-blue-50",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:s.jsx(i.Z,{className:"h-6 w-6 text-primary-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["install"===w&&"Install PropertyHub","notifications"===w&&"Enable Notifications","complete"===w&&"Setup Complete!"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["install"===w&&"Get the full app experience","notifications"===w&&"Stay updated with real-time alerts","complete"===w&&"You're all set to go!"]})]})]}),s.jsx("button",{onClick:j,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(l.Z,{className:"h-5 w-5"})})]}),"install"===w&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-3 text-center",children:[(0,s.jsxs)("div",{className:"p-3 bg-white rounded-lg",children:[s.jsx(c.Z,{className:"h-6 w-6 text-green-500 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Works Offline"})]}),(0,s.jsxs)("div",{className:"p-3 bg-white rounded-lg",children:[s.jsx(d.Z,{className:"h-6 w-6 text-blue-500 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Push Notifications"})]}),(0,s.jsxs)("div",{className:"p-3 bg-white rounded-lg",children:[s.jsx(i.Z,{className:"h-6 w-6 text-purple-500 mx-auto mb-1"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Native Feel"})]})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)(m.z,{variant:"default",onClick:N,className:"flex-1",children:[s.jsx(u.Z,{className:"h-4 w-4 mr-2"}),"Install App"]}),s.jsx(m.z,{variant:"outline",onClick:j,className:"px-4",children:"Later"})]})]}),"notifications"===w&&(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"p-4 bg-white rounded-lg border border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(d.Z,{className:"h-8 w-8 text-blue-500"}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"font-medium text-gray-900",children:"Real-time Updates"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Get notified about new leads, messages, and appointments instantly."})]})]})}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsxs)(m.z,{variant:"default",onClick:A,className:"flex-1",disabled:"denied"===p,children:[s.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"Enable Notifications"]}),s.jsx(m.z,{variant:"outline",onClick:()=>{v("complete")},className:"px-4",children:"Skip"})]}),"denied"===p&&s.jsx("p",{className:"text-xs text-red-600 text-center",children:"Notifications are blocked. You can enable them in your browser settings."})]}),"complete"===w&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center py-4",children:[s.jsx("div",{className:"h-16 w-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx("svg",{className:"h-8 w-8 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"You're all set!"}),s.jsx("p",{className:"text-sm text-gray-600",children:"PropertyHub is now installed and ready to use. Enjoy the enhanced experience!"})]}),s.jsx(m.z,{variant:"default",onClick:j,className:"w-full",children:"Get Started"})]}),n&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"h-2 w-2 bg-yellow-400 rounded-full"}),s.jsx("p",{className:"text-sm text-yellow-800",children:"You're currently offline. The app will sync when connection is restored."})]})})]})})}function g(){let{isOffline:e}=o();return e?s.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-white text-center py-2 text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[s.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse"}),s.jsx("span",{children:"You're offline - Some features may be limited"})]})}):null}function f(){let{isInstalled:e,isOffline:t,notificationPermission:a,pushSubscription:r,requestNotificationPermission:n,subscribeToPush:i,unsubscribeFromPush:l}=o();return(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"App Status"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Installation"}),s.jsx("p",{className:"text-sm text-gray-600",children:e?"App is installed":"Running in browser"})]}),s.jsx("div",{className:`h-3 w-3 rounded-full ${e?"bg-green-400":"bg-gray-400"}`})]})}),s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Connection"}),s.jsx("p",{className:"text-sm text-gray-600",children:t?"Offline":"Online"})]}),s.jsx("div",{className:`h-3 w-3 rounded-full ${t?"bg-red-400":"bg-green-400"}`})]})}),s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:"granted"===a?"Enabled":"denied"===a?"Blocked":"Not set"})]}),s.jsx("div",{className:`h-3 w-3 rounded-full ${"granted"===a?"bg-green-400":"denied"===a?"bg-red-400":"bg-yellow-400"}`})]})}),s.jsx("div",{className:"p-4 border border-gray-200 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:"Push Notifications"}),s.jsx("p",{className:"text-sm text-gray-600",children:r?"Active":"Inactive"})]}),s.jsx("div",{className:`h-3 w-3 rounded-full ${r?"bg-green-400":"bg-gray-400"}`})]})})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:["granted"!==a&&s.jsx(m.z,{variant:"outline",onClick:n,size:"sm",children:"Enable Notifications"}),"granted"===a&&!r&&s.jsx(m.z,{variant:"outline",onClick:i,size:"sm",children:"Enable Push Notifications"}),r&&s.jsx(m.z,{variant:"outline",onClick:l,size:"sm",children:"Disable Push Notifications"})]})]})}},90772:(e,t,a)=>{"use strict";a.d(t,{z:()=>c});var s=a(10326),r=a(17577),n=a(34214),o=a(79360),i=a(77863);let l=(0,o.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...o},c)=>{let d=r?n.g7:"button";return s.jsx(d,{className:(0,i.cn)(l({variant:t,size:a,className:e})),ref:c,...o})});c.displayName="Button"},33071:(e,t,a)=>{"use strict";a.d(t,{Zb:()=>o});var s=a(10326),r=a(17577),n=a(77863);let o=r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));o.displayName="Card",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader",r.forwardRef(({className:e,...t},a)=>s.jsx("h3",{ref:a,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle",r.forwardRef(({className:e,...t},a)=>s.jsx("p",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...t})).displayName="CardContent",r.forwardRef(({className:e,...t},a)=>s.jsx("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},94843:(e,t,a)=>{"use strict";a.d(t,{x:()=>l});var s=a(44099),r=a(85999);class n extends Error{constructor(e,t="UNKNOWN_ERROR",a=500,s){super(e),this.name="AppError",this.code=t,this.status=a,this.details=s}}class o extends n{constructor(e="Network error occurred"){super(e,"NETWORK_ERROR",0),this.name="NetworkError"}}class i{constructor(){this.refreshPromise=null,this.client=s.Z.create({baseURL:"http://localhost:8080/api/api",timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!1}),this.setupInterceptors()}setupInterceptors(){this.client.interceptors.request.use(e=>{let t=localStorage.getItem("auth_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e.headers["X-Request-ID"]=crypto.randomUUID(),e.headers["X-Request-Time"]=new Date().toISOString(),e},e=>Promise.reject(this.normalizeError(e))),this.client.interceptors.response.use(e=>e,async e=>{let t=e.config;if(e.response?.status===401&&!t._retry){t._retry=!0;try{this.refreshPromise||(this.refreshPromise=this.refreshToken());let e=await this.refreshPromise;if(this.refreshPromise=null,e&&t.headers)return t.headers.Authorization=`Bearer ${e}`,this.client(t)}catch(e){return this.refreshPromise=null,this.handleAuthFailure(),Promise.reject(this.normalizeError(e))}}if(!e.response){let a=this.createNetworkError(e);return this.showErrorToast(a,t),Promise.reject(a)}let a=this.normalizeError(e);return this.showErrorToast(a,t),Promise.reject(a)})}async refreshToken(){try{let e=(await this.client.post("/frontend-auth/refresh")).data.token;return localStorage.setItem("auth_token",e),e}catch(e){throw e}}handleAuthFailure(){localStorage.removeItem("auth_token")}normalizeError(e){let t=function(e){if(e.response){let{status:t,data:a}=e.response;return new n(a?.error||a?.message||"An error occurred",a?.code||`HTTP_${t}`,t,a)}return e.request?new o("Unable to connect to server"):e instanceof n?e:new n(e.message||"An unexpected error occurred")}(e);return{message:t.message,status:t.status,code:t.code,details:t.details}}createNetworkError(e){return{message:"Network error. Please check your connection and try again.",code:"NETWORK_ERROR"}}showErrorToast(e,t){!["/auth/me","/auth/refresh","/frontend-auth/refresh"].some(e=>t?.url?.includes(e))&&e.status&&e.status>=400&&r.A.error(e.message,{id:`error-${e.status}-${t?.url}`})}getErrorMessage(e){let t=e.response;if(t?.data&&"object"==typeof t.data){let e=t.data;if(e.message)return e.message;if(e.error)return e.error;if(e.detail)return e.detail}switch(t?.status){case 400:return"Bad request. Please check your input.";case 401:return"Authentication required. Please log in.";case 403:return"Access denied. You don't have permission for this action.";case 404:return"Resource not found.";case 409:return"Conflict. The resource already exists or is in use.";case 422:return"Validation error. Please check your input.";case 429:return"Too many requests. Please try again later.";case 500:return"Server error. Please try again later.";case 502:return"Bad gateway. The server is temporarily unavailable.";case 503:return"Service unavailable. Please try again later.";case 504:return"Gateway timeout. The request took too long to process.";default:return e.message||"An unexpected error occurred."}}async get(e,t){return this.client.get(e,t)}async post(e,t,a){return this.client.post(e,t,a)}async put(e,t,a){return this.client.put(e,t,a)}async patch(e,t,a){return this.client.patch(e,t,a)}async delete(e,t){return this.client.delete(e,t)}async uploadFile(e,t,a){let s=new FormData;return s.append("file",t),this.client.post(e,s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:e=>{a&&e.total&&a(Math.round(100*e.loaded/e.total))}})}}let l=new i},57963:(e,t,a)=>{"use strict";a.d(t,{H:()=>m,a:()=>u});var s=a(10326),r=a(17577),n=a(35047),o=a(94843);class i{async login(e,t){return(await o.x.post("/frontend-auth/login",{email:e,password:t})).data}async logout(){await o.x.post("/frontend-auth/logout")}async getCurrentUser(){return(await o.x.get("/frontend-auth/me")).data.data}async refreshToken(){return(await o.x.post("/frontend-auth/refresh")).data}async requestPasswordReset(e){await o.x.post("/auth/forgot-password",{email:e})}async resetPassword(e,t){await o.x.post("/auth/reset-password",{token:e,password:t})}async changePassword(e,t){await o.x.post("/frontend-auth/change-password",{current_password:e,new_password:t})}async updateProfile(e){return(await o.x.patch("/frontend-auth/profile",e)).data.data}async initiateGoogleAuth(e){return(await o.x.get(`/auth/google?agentId=${e}`)).data}async initiateZoomAuth(e){return(await o.x.get(`/auth/zoom?agentId=${e}`)).data}async getOAuthStatus(e){return(await o.x.get(`/auth/oauth-status/${e}`)).data}}let l=new i;var c=a(85999);let d=(0,r.createContext)(void 0);function u(){let e=(0,r.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function m({children:e}){let[t,a]=(0,r.useState)(null),[o,i]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),h=(0,n.useRouter)(),p=e=>{try{let t=JSON.parse(atob(e.split(".")[1])),a=Date.now()/1e3,s=(t.exp-a-300)*1e3;if(s>0){u&&clearTimeout(u);let e=setTimeout(async()=>{try{await g()}catch(e){console.error("Automatic token refresh failed:",e),await x()}},s);m(e)}}catch(e){console.error("Failed to setup token refresh:",e)}},g=async()=>{try{let e=await l.refreshToken();return localStorage.setItem("auth_token",e.token),a(e.user),p(e.token),e.token}catch(e){throw e}},f=(0,r.useCallback)(async(e,t)=>{try{i(!0);let s=await l.login(e,t);localStorage.setItem("auth_token",s.token),a(s.user),p(s.token),c.A.success("Welcome back!",{description:`Logged in as ${s.user.full_name}`}),"admin"===s.user.role?h.push("/admin/dashboard"):h.push("/agent/dashboard")}catch(e){throw c.A.error("Login failed",{description:e.message||"Please check your credentials and try again"}),e}finally{i(!1)}},[h]),x=(0,r.useCallback)(async()=>{try{await l.logout()}catch(e){console.error("Logout error:",e)}finally{u&&(clearTimeout(u),m(null)),localStorage.removeItem("auth_token"),a(null),h.push("/auth/login"),c.A.success("Logged out successfully",{description:"You have been securely logged out"})}},[h,u]),b=(0,r.useCallback)(async()=>{try{let e=await l.getCurrentUser();a(e)}catch(e){console.error("Failed to refresh user:",e),x()}},[x]),y=(0,r.useCallback)(e=>!!t&&(t.permissions.includes(e)||"admin"===t.role),[t]),w=(0,r.useMemo)(()=>({user:t,loading:o,login:f,logout:x,refreshUser:b,isAuthenticated:!!t,hasPermission:y,isAgent:t?.role==="agent",isAdmin:t?.role==="admin"}),[t,o,f,x,b,y]);return s.jsx(d.Provider,{value:w,children:e})}},18202:(e,t,a)=>{"use strict";a.d(t,{z:()=>l});var s=a(10326),r=a(17577),n=a(57963),o=a(94843);let i=(0,r.createContext)(void 0);function l({children:e}){let[t,a]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),{user:p,isAuthenticated:g}=(0,n.a)(),f=async()=>{try{u(!0),h(null);let e=(await o.x.get(`/dashboard/agent/config/${p?.id}`)).data.data;if(a({id:e.id,fullName:e.full_name,email:e.email,organizationId:e.organization_id,wabaPhoneNumber:e.waba_phone_number,wabaDisplayName:e.waba_display_name,botName:e.bot_name||"Doro",googleConnected:!!e.google_email,zoomConnected:!!e.zoom_user_id,wabaConnected:!!e.waba_phone_number,workingHours:e.working_hours||{start:9,end:18,days:[1,2,3,4,5]},timezone:e.timezone||"Asia/Singapore",botPersonalityConfig:e.bot_personality_config||{},customResponses:e.custom_responses||{},totalLeads:e.total_leads||0,activeConversations:e.active_conversations||0,conversionRate:e.conversion_rate||0,averageResponseTime:e.average_response_time||0}),p?.role==="admin"||e.organization_id)try{let t=(await o.x.get(`/dashboard/organization/config/${e.organization_id}`)).data.data;c({id:t.id,name:t.name,slug:t.slug,subscriptionTier:t.subscription_tier,settings:t.settings||{},maxAgents:t.max_agents||10,currentAgents:t.current_agents||1,features:t.features||[]})}catch(e){console.warn("Failed to load organization config:",e)}}catch(e){console.error("Failed to load agent config:",e),h(e.message||"Failed to load agent configuration")}finally{u(!1)}},x=(0,r.useCallback)(async e=>{try{u(!0),h(null);let t=(await o.x.patch(`/dashboard/agent/config/${p?.id}`,e)).data.data;a(e=>e?{...e,...t}:null)}catch(e){throw h(e.message||"Failed to update agent configuration"),e}finally{u(!1)}},[p?.id]),b=(0,r.useCallback)(async()=>{await f()},[]),y=(0,r.useCallback)(async e=>{await x({botPersonalityConfig:e})},[x]),w=(0,r.useCallback)(async e=>{await x({customResponses:e})},[x]),v=(0,r.useCallback)(async e=>{await x({workingHours:e})},[x]),j=(0,r.useCallback)((e=new Date)=>{if(!t)return!1;let{workingHours:a,timezone:s}=t,r=new Date(e.toLocaleString("en-US",{timeZone:s})),n=r.getDay(),o=r.getHours();return a.days.includes(n)&&o>=a.start&&o<a.end},[t]),N=(0,r.useCallback)(()=>{if(!t)return null;let{workingHours:e,timezone:a}=t,s=new Date;for(let t=0;t<7;t++){let r=new Date(s);r.setDate(s.getDate()+t);let n=new Date(r.toLocaleString("en-US",{timeZone:a})),o=n.getDay();if(e.days.includes(o)&&(n.setHours(e.start,0,0,0),0===t&&s.getHours()>=e.start&&n.setTime(s.getTime()+36e5),n.getHours()<e.end))return n}return null},[t]),A=(0,r.useCallback)(()=>{if(!t||!l)return!1;let e="basic"===l.subscriptionTier?50:"pro"===l.subscriptionTier?200:1e3;return t.activeConversations<e},[t,l]);return s.jsx(i.Provider,{value:{agentConfig:t,organizationConfig:l,loading:d,error:m,updateAgentConfig:x,refreshAgentConfig:b,updateBotPersonality:y,updateCustomResponses:w,updateWorkingHours:v,isWithinWorkingHours:j,getNextAvailableSlot:N,canCreateNewConversation:A},children:e})}},45922:(e,t,a)=>{"use strict";a.d(t,{k:()=>u});var s=a(10326),r=a(17577),n=a(57963),o=a(94843);class i{async getIntegrationStatus(e){return(await o.x.get("/dashboard/integrations/status",{params:{agentId:e}})).data.data}async getWABAIntegration(e){return(await o.x.get("/dashboard/integrations/waba",{params:{agentId:e}})).data.data}async connectWABA(e){return(await o.x.post("/dashboard/integrations/waba/connect",e)).data.data}async updateWABA(e){return(await o.x.patch("/dashboard/integrations/waba",e)).data.data}async disconnectWABA(){await o.x.post("/dashboard/integrations/waba/disconnect")}async testWABAConnection(e){return(await o.x.post("/dashboard/integrations/waba/test",{agentId:e})).data.data}async getWABAQRCode(){return(await o.x.get("/dashboard/integrations/waba/qr-code")).data.data}async getGoogleIntegration(e){return(await o.x.get("/dashboard/integrations/google",{params:{agentId:e}})).data.data}async getGoogleAuthUrl(e){return(await o.x.get("/auth/google",{params:{agentId:e}})).data}async disconnectGoogle(){await o.x.post("/dashboard/integrations/google/disconnect")}async testGoogleConnection(e){return(await o.x.post("/dashboard/integrations/google/test",{agentId:e})).data.data}async getZoomIntegration(e){return(await o.x.get("/dashboard/integrations/zoom",{params:{agentId:e}})).data.data}async getZoomAuthUrl(e){return(await o.x.get("/auth/zoom",{params:{agentId:e}})).data}async disconnectZoom(){await o.x.post("/dashboard/integrations/zoom/disconnect")}async testZoomConnection(e){return(await o.x.post("/dashboard/integrations/zoom/test",{agentId:e})).data.data}async updateZoomSettings(e){return(await o.x.patch("/dashboard/integrations/zoom/settings",e)).data.data}async getMetaBusinessIntegration(e){return(await o.x.get("/dashboard/integrations/meta",{params:{agentId:e}})).data.data}async getMetaAuthUrl(){return(await o.x.get("/dashboard/integrations/meta/auth-url")).data}async disconnectMeta(){await o.x.post("/dashboard/integrations/meta/disconnect")}async syncAllIntegrations(e){return(await o.x.post("/dashboard/integrations/sync-all",{agentId:e})).data.data}async getHealthCheck(e){return(await o.x.get("/dashboard/integrations/health",{params:{agentId:e}})).data.data}}let l=new i;var c=a(85999);let d=(0,r.createContext)(void 0);function u({children:e}){let[t,a]=(0,r.useState)(null),[o,i]=(0,r.useState)([]),[u,m]=(0,r.useState)(!0),[h,p]=(0,r.useState)(null),{user:g,isAuthenticated:f}=(0,n.a)(),x=async()=>{try{m(!0),p(null);let e=await l.getWABAIntegration(g?.id);a(e),"connected"===e.status&&e.templates&&i(e.templates.map(e=>({id:e.id,name:e.name,category:e.category,status:e.status,language:e.language,content:""})))}catch(e){console.error("Failed to load WABA config:",e),p(e.message||"Failed to load WABA configuration")}finally{m(!1)}},b=(0,r.useCallback)(async e=>{try{m(!0),p(null);let t=await l.connectWABA(e);a(t),c.A.success("WABA Connected",{description:`Successfully connected WhatsApp Business API for ${e.phoneNumber}`}),await j()}catch(t){let e=t.message||"Failed to connect WABA";throw p(e),c.A.error("WABA Connection Failed",{description:e}),t}finally{m(!1)}},[]),y=(0,r.useCallback)(async e=>{try{m(!0),p(null);let t=await l.updateWABA(e);a(t),c.A.success("WABA Updated",{description:"WhatsApp Business API configuration updated successfully"})}catch(t){let e=t.message||"Failed to update WABA";throw p(e),c.A.error("WABA Update Failed",{description:e}),t}finally{m(!1)}},[]),w=(0,r.useCallback)(async()=>{try{m(!0),p(null),await l.disconnectWABA(),a(null),i([]),c.A.success("WABA Disconnected",{description:"WhatsApp Business API has been disconnected"})}catch(t){let e=t.message||"Failed to disconnect WABA";throw p(e),c.A.error("WABA Disconnect Failed",{description:e}),t}finally{m(!1)}},[]),v=(0,r.useCallback)(async()=>{try{let e=await l.testWABAConnection(g?.id);if(e.success)return c.A.success("WABA Connection Test",{description:e.message}),!0;return c.A.error("WABA Connection Test Failed",{description:e.message}),!1}catch(e){return c.A.error("WABA Connection Test Failed",{description:e.message||"Failed to test WABA connection"}),!1}},[g?.id]),j=(0,r.useCallback)(async()=>{try{if(!t||"connected"!==t.status)return;let e=await l.getWABAIntegration(g?.id);e.templates&&i(e.templates.map(e=>({id:e.id,name:e.name,category:e.category,status:e.status,language:e.language,content:""})))}catch(e){console.error("Failed to refresh templates:",e),c.A.error("Failed to refresh templates",{description:e.message})}},[t,g?.id]),N=(0,r.useCallback)(e=>o.find(t=>t.id===e),[o]),A={wabaConfig:t,templates:o,loading:u,error:h,connectWABA:b,updateWABA:y,disconnectWABA:w,testConnection:v,refreshTemplates:j,getTemplate:N,refreshStatus:(0,r.useCallback)(async()=>{await x()},[]),isConnected:t?.status==="connected",hasError:!!h||t?.status==="error"};return s.jsx(d.Provider,{value:A,children:e})}},17610:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.d(t,{s:()=>c,w:()=>d});var r=a(10326),n=a(17577),o=a(14612),i=a(57963);a(40381);var l=e([o]);o=(l.then?(await l)():l)[0];let u=(0,n.createContext)(void 0);function c(){let e=(0,n.useContext)(u);if(void 0===e)throw Error("useSocket must be used within a SocketProvider");return e}function d({children:e}){let[t,a]=(0,n.useState)(null),[s,o]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),{user:d,isAuthenticated:m}=(0,i.a)();return r.jsx(u.Provider,{value:{socket:t,connected:s,joinRoom:e=>{t&&s&&t.emit("join_room",e)},leaveRoom:e=>{t&&s&&t.emit("leave_room",e)},emit:(e,a)=>{t&&s&&t.emit(e,a)}},children:e})}s()}catch(e){s(e)}})},77863:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(41135),r=a(31009);function n(...e){return(0,r.m6)((0,s.W)(e))}},11411:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x,dynamic:()=>p,metadata:()=>g,viewport:()=>f});var s=a(19510),r=a(23490),n=a.n(r),o=a(14557),i=a.n(o);a(67272);var l=a(68570);(0,l.createProxy)(String.raw`C:\Users\Imperial\Desktop\realestate-bot-backend\frontend\app\providers.tsx#useTheme`);let c=(0,l.createProxy)(String.raw`C:\Users\Imperial\Desktop\realestate-bot-backend\frontend\app\providers.tsx#Providers`);var d=a(51032),u=a(50650);let m=(0,l.createProxy)(String.raw`C:\Users\Imperial\Desktop\realestate-bot-backend\frontend\components\ui\PWAInstallPrompt.tsx#PWAInstallPrompt`),h=(0,l.createProxy)(String.raw`C:\Users\Imperial\Desktop\realestate-bot-backend\frontend\components\ui\PWAInstallPrompt.tsx#OfflineIndicator`);(0,l.createProxy)(String.raw`C:\Users\Imperial\Desktop\realestate-bot-backend\frontend\components\ui\PWAInstallPrompt.tsx#PWAStatus`);let p="force-dynamic",g={title:{default:"PropertyHub Command",template:"%s | PropertyHub Command"},description:"Apple-inspired frontend for multi-tenant real estate bot system with AI-powered lead management",keywords:["real estate","property management","AI bot","lead generation","WhatsApp automation","CRM"],authors:[{name:"PropertyHub Team"}],creator:"PropertyHub Team",openGraph:{type:"website",locale:"en_US",url:"https://propertyhub-command.com",title:"PropertyHub Command",description:"Apple-inspired frontend for multi-tenant real estate bot system",siteName:"PropertyHub Command"},twitter:{card:"summary_large_image",title:"PropertyHub Command",description:"Apple-inspired frontend for multi-tenant real estate bot system",creator:"@propertyhub"},icons:{icon:"/favicon.ico",shortcut:"/favicon-16x16.png",apple:"/apple-touch-icon.png"},manifest:"/manifest.json"},f={width:"device-width",initialScale:1,maximumScale:1,themeColor:[{media:"(prefers-color-scheme: light)",color:"#3b82f6"},{media:"(prefers-color-scheme: dark)",color:"#1e40af"}]};function x({children:e}){return s.jsx("html",{lang:"en",className:"h-full",suppressHydrationWarning:!0,children:s.jsx("body",{className:(0,u.cn)("min-h-screen bg-background font-sans antialiased",n().variable,i().variable),children:(0,s.jsxs)(c,{children:[s.jsx(h,{}),e,s.jsx(m,{}),s.jsx(d.x7,{position:"top-right",expand:!0,richColors:!0,closeButton:!0,toastOptions:{duration:4e3,classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}})]})})})}},25047:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m,dynamic:()=>u});var s=a(19510),r=a(57371),n=a(71159),o=a(43025),i=a(46145),l=a(50650);let c=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef(({className:e,variant:t,size:a,asChild:r=!1,...n},i)=>{let d=r?o.g7:"button";return s.jsx(d,{className:(0,l.cn)(c({variant:t,size:a,className:e})),ref:i,...n})});d.displayName="Button";let u="force-dynamic";function m(){return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-6xl font-bold text-gray-900 mb-2",children:"404"}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600",children:"The page you're looking for doesn't exist or has been moved."})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(r.default,{href:"/",className:"block",children:s.jsx(d,{className:"w-full bg-blue-600 hover:bg-blue-700",children:"Go Home"})}),s.jsx(r.default,{href:"/auth/login",className:"block",children:s.jsx(d,{variant:"outline",className:"w-full",children:"Login"})})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:s.jsx("p",{className:"text-xs text-gray-500",children:"PropertyHub Command • Real Estate Bot System"})})]})})}},50650:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(55761),r=a(62386);function n(...e){return(0,r.m6)((0,s.W)(e))}},67272:()=>{}};