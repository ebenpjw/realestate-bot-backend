(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{73541:function(e,s,t){Promise.resolve().then(t.bind(t,95147))},95147:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return T}});var a=t(57437),r=t(2265),i=t(85315),n=t(59035),l=t(85012),c=t(61994);function d(e){let{scenarios:s,onStartTest:t,loading:r}=e,i=e=>{switch(e){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Test Scenarios"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Choose a scenario to test your bot's responses and strategies"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 hover:shadow-sm transition-all duration-200",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("span",{className:(0,c.Z)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",i(e.difficulty)),children:e.difficulty})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Expected outcome:"})," ",e.expectedOutcome]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Initial message:"}),(0,a.jsxs)("div",{className:"mt-1 p-2 bg-gray-50 rounded text-gray-700 italic",children:['"',e.initialMessage,'"']})]})]}),(0,a.jsx)("button",{onClick:()=>t(e),disabled:r,className:"w-full btn-primary flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,a.jsx)(l.TK,{size:"sm"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Start Test"]})})]},e.id))}),(0,a.jsxs)("div",{className:"mt-6 border-t border-gray-200 pt-6",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Custom Scenario"}),(0,a.jsxs)("div",{className:"border border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-3",children:"Create your own test scenario with custom initial message"}),(0,a.jsx)("button",{className:"btn-secondary",children:"Create Custom Test"})]})]}),(0,a.jsxs)("div",{className:"mt-6 bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"\uD83D\uDCA1 Testing Tips"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• Test different conversation flows to identify weak points"}),(0,a.jsx)("li",{children:"• Pay attention to response times and strategy selection"}),(0,a.jsx)("li",{children:"• Try challenging scenarios to improve bot resilience"}),(0,a.jsx)("li",{children:"• Use quick actions to simulate common user responses"})]})]})]})]})}var m=t(87735),o=t(20322),x=t(31847),g=t(67442);function h(e){let{session:s,scenario:t,userInput:r,onUserInputChange:i,onSendMessage:n,messagesEndRef:l}=e;return(0,a.jsxs)("div",{className:"card h-[600px] flex flex-col",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Test Conversation"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:t.name})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 inline mr-1"}),Math.floor((Date.now()-new Date(s.startTime).getTime())/6e4),"m"]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Testing Mode"})]})]})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4 bg-gray-50",children:[s.messages.map((e,t)=>{let r="user"===e.sender,i=s.messages[t-1],n=0===t||i&&new Date(e.timestamp).getTime()-new Date(i.timestamp).getTime()>3e5;return(0,a.jsxs)("div",{children:[n&&(0,a.jsx)("div",{className:"text-center text-xs text-gray-500 mb-4",children:(0,m.WU)(new Date(e.timestamp),"h:mm a")}),(0,a.jsx)("div",{className:(0,c.Z)("flex",r?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:(0,c.Z)("max-w-xs lg:max-w-md px-4 py-2 rounded-2xl",r?"bg-primary-600 text-white rounded-br-sm":"bg-white text-gray-900 rounded-bl-sm border border-gray-200"),children:[(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.message}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,a.jsx)("span",{className:"text-xs opacity-70",children:(0,m.WU)(new Date(e.timestamp),"h:mm a")}),!r&&e.processingTime&&(0,a.jsxs)("span",{className:"text-xs opacity-70",children:[(e.processingTime/1e3).toFixed(1),"s"]})]}),!r&&(e.strategy||e.confidence)&&(0,a.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100 space-y-1",children:[e.strategy&&(0,a.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,a.jsx)(x.Z,{className:"h-3 w-3 mr-1"}),"Strategy: ",e.strategy]}),e.confidence&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Confidence: ",(100*e.confidence).toFixed(0),"%"]})]})]})})]},e.id)}),(0,a.jsx)("div",{ref:l})]}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200 bg-white",children:[(0,a.jsxs)("div",{className:"flex items-end space-x-3",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("textarea",{value:r,onChange:e=>i(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),n())},placeholder:"Type your test message...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",rows:1,style:{minHeight:"40px",maxHeight:"120px"}})}),(0,a.jsx)("button",{onClick:n,disabled:!r.trim(),className:"btn-primary p-2 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(g.Z,{className:"h-5 w-5"})})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Press Enter to send • Shift+Enter for new line • This is a safe test environment"})]})]})}var u=t(1442),y=t(20301),p=t(19672),j=t(43767);function f(e){let{sessions:s}=e,t=e=>{switch(e){case"completed":return(0,a.jsx)(u.Z,{className:"h-4 w-4 text-green-500"});case"failed":return(0,a.jsx)(y.Z,{className:"h-4 w-4 text-red-500"});default:return(0,a.jsx)(o.Z,{className:"h-4 w-4 text-yellow-500"})}},r=e=>{switch(e){case"completed":return"text-green-600";case"failed":return"text-red-600";default:return"text-yellow-600"}},i=(e,s)=>{let t=new Date(e);return Math.floor(((s?new Date(s):new Date).getTime()-t.getTime())/6e4)};return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,a.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Test Results"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"History of your bot testing sessions"})]}),(0,a.jsxs)("div",{className:"p-6",children:[0===s.length?(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,a.jsx)(p.Z,{className:"h-8 w-8 mx-auto mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No test sessions yet"}),(0,a.jsx)("p",{className:"text-xs",children:"Start a test scenario to see results here"})]}):(0,a.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.scenario}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,m.WU)(new Date(e.startTime),"MMM d, h:mm a")})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[t(e.status),(0,a.jsx)("span",{className:(0,c.Z)("text-sm font-medium ml-1",r(e.status)),children:e.status})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,a.jsx)(j.Z,{className:"h-4 w-4 mr-1"}),"Messages"]}),(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.metrics.totalMessages})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center text-gray-500 mb-1",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),"Duration"]}),(0,a.jsxs)("div",{className:"font-medium text-gray-900",children:[i(e.startTime,e.endTime),"m"]})]})]}),(0,a.jsxs)("div",{className:"text-sm mb-3",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-1",children:"Avg Response Time"}),(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.metrics.avgProcessingTime>0?"".concat((e.metrics.avgProcessingTime/1e3).toFixed(1),"s"):"-"})]}),(0,a.jsxs)("div",{className:"text-sm mb-3",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-1",children:"Strategies Used"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.metrics.strategiesUsed.length>0?e.metrics.strategiesUsed.map((e,s)=>(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-primary-100 text-primary-800",children:e},s)):(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"None recorded"})})]}),(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("div",{className:"text-gray-500 mb-1",children:"Outcome"}),(0,a.jsx)("div",{className:"text-gray-900",children:e.metrics.finalOutcome})]}),(0,a.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,a.jsx)("button",{className:"text-xs text-primary-600 hover:text-primary-800",children:"View Full Conversation →"})})]},e.id))}),s.length>0&&(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Testing Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-gray-900",children:s.length}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Total Tests"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-lg font-bold text-green-600",children:s.filter(e=>"completed"===e.status).length}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Completed"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[s.length>0?(s.reduce((e,s)=>e+s.metrics.avgProcessingTime,0)/s.length/1e3).toFixed(1):"0","s"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Avg Response"})]})]})]})]})]})}var N=t(95901),v=t(55026),b=t(75945);let w=[{id:"singapore-buyer",name:"Singaporean Property Buyer",description:"Interested in 3-bedroom condo, budget $1.2M, Marina Bay area",difficulty:"Medium",expectedOutcome:"Appointment booking",initialMessage:"Hi, I saw your property listing for Marina Bay condos. I'm interested in a 3-bedroom unit."},{id:"difficult-lead",name:"Price-Sensitive Lead",description:"Very price-conscious, multiple objections, needs convincing",difficulty:"Hard",expectedOutcome:"Qualification or appointment",initialMessage:"Your prices seem too high compared to other agents. Why should I choose you?"},{id:"investor-lead",name:"Property Investor",description:"Looking for investment properties, ROI focused, multiple units",difficulty:"Medium",expectedOutcome:"Investment consultation",initialMessage:"I'm looking for investment properties with good rental yield. What do you have?"},{id:"first-time-buyer",name:"First-Time Buyer",description:"New to property buying, needs education and guidance",difficulty:"Easy",expectedOutcome:"Education and appointment",initialMessage:"Hi, I'm looking to buy my first property but I don't know where to start."}];function T(){let{user:e}=(0,i.a)(),[s,t]=(0,r.useState)(null),[n,l]=(0,r.useState)(null),[c,m]=(0,r.useState)([]),[o,x]=(0,r.useState)(!1),[g,u]=(0,r.useState)(""),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[null==n?void 0:n.messages]);let p=async e=>{x(!0);try{let s={id:Date.now().toString(),scenario:e.name,messages:[],startTime:new Date().toISOString(),status:"active",metrics:{totalMessages:0,avgProcessingTime:0,strategiesUsed:[],finalOutcome:"In progress"}};l(s),t(e),await j(e.initialMessage,s)}catch(e){console.error("Failed to start test:",e)}finally{x(!1)}},j=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;if(!s)return;let t={id:Date.now().toString(),sender:"user",message:e,timestamp:new Date().toISOString()},a={...s,messages:[...s.messages,t]};l(a);try{let e=Date.now();await new Promise(e=>setTimeout(e,1e3+2e3*Math.random()));let s=Date.now()-e,t=["Thank you for your interest! I'd be happy to help you find the perfect property. Can you tell me more about your specific requirements?","That's a great area to consider! Marina Bay has excellent connectivity and amenities. What's your preferred budget range?","I understand your concerns about pricing. Let me explain the value proposition and current market conditions...","For investment properties, I'd recommend focusing on areas with strong rental demand. Let me share some options with you.","As a first-time buyer, I'll guide you through the entire process. Let's start with understanding your needs and budget."],r={id:(Date.now()+1).toString(),sender:"bot",message:t[Math.floor(Math.random()*t.length)]||"Thank you for your message. How can I help you today?",timestamp:new Date().toISOString(),processingTime:s,strategy:"Property Matching",confidence:.85+.15*Math.random()},i={...a,messages:[...a.messages,r],metrics:{...a.metrics,totalMessages:a.messages.length+1,avgProcessingTime:(a.metrics.avgProcessingTime+s)/2,strategiesUsed:[...new Set([...a.metrics.strategiesUsed,r.strategy])]}};l(i)}catch(e){console.error("Failed to send test message:",e)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,a.jsx)(N.Z,{className:"h-8 w-8 mr-3 text-primary-600"}),"Bot Testing Interface"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Test your bot responses safely without sending actual WhatsApp messages"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{l(null),t(null),u("")},className:"btn-secondary flex items-center",children:[(0,a.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Reset"]}),(0,a.jsxs)("button",{onClick:()=>{if(!n)return;let e={...n,endTime:new Date().toISOString(),status:"completed",metrics:{...n.metrics,finalOutcome:"Test completed successfully"}};m(s=>[e,...s]),l(null),t(null)},className:"btn-primary flex items-center",children:[(0,a.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"End Test"]})]})})]}),n?(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsx)(h,{session:n,scenario:s,userInput:g,onUserInputChange:u,onSendMessage:()=>{g.trim()&&n&&(j(g.trim()),u(""))},messagesEndRef:y})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Current Scenario"})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:null==s?void 0:s.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:null==s?void 0:s.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Difficulty:"}),(0,a.jsx)("span",{className:"font-medium ".concat((null==s?void 0:s.difficulty)==="Easy"?"text-green-600":(null==s?void 0:s.difficulty)==="Medium"?"text-yellow-600":"text-red-600"),children:null==s?void 0:s.difficulty})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Expected:"}),(0,a.jsx)("span",{className:"text-gray-900",children:null==s?void 0:s.expectedOutcome})]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Session Metrics"})}),(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Messages:"}),(0,a.jsx)("span",{className:"text-gray-900",children:n.messages.length})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Avg Response:"}),(0,a.jsx)("span",{className:"text-gray-900",children:n.metrics.avgProcessingTime>0?"".concat((n.metrics.avgProcessingTime/1e3).toFixed(1),"s"):"-"})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Strategies:"}),(0,a.jsx)("span",{className:"text-gray-900",children:n.metrics.strategiesUsed.length})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Duration:"}),(0,a.jsxs)("span",{className:"text-gray-900",children:[Math.floor((Date.now()-new Date(n.startTime).getTime())/6e4),"m"]})]})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"px-4 py-3 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-900",children:"Quick Actions"})}),(0,a.jsxs)("div",{className:"p-4 space-y-2",children:[(0,a.jsx)("button",{onClick:()=>u("I'm interested in viewing the property"),className:"w-full text-left text-sm text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded",children:"Express interest"}),(0,a.jsx)("button",{onClick:()=>u("What's the price range?"),className:"w-full text-left text-sm text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded",children:"Ask about pricing"}),(0,a.jsx)("button",{onClick:()=>u("Can we schedule a viewing?"),className:"w-full text-left text-sm text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded",children:"Request viewing"}),(0,a.jsx)("button",{onClick:()=>u("I need to think about it"),className:"w-full text-left text-sm text-gray-600 hover:text-gray-900 p-2 hover:bg-gray-50 rounded",children:"Show hesitation"})]})]})]})]}):(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(d,{scenarios:w,onStartTest:p,loading:o})}),(0,a.jsx)("div",{children:(0,a.jsx)(f,{sessions:c})})]})]})}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=73541)}),_N_E=e.O()}]);