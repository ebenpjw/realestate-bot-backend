(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[896],{48564:function(e,s,t){Promise.resolve().then(t.bind(t,3729))},3729:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return O}});var r=t(57437),a=t(85315),n=t(99376),l=t(2265),i=t(27648),c=t(19778),o=t(43767),d=t(78931),m=t(16331),x=t(95901),h=t(52484),u=t(59152),f=t(53229),g=t(19207),j=t(71973),v=t(72952),p=t(1157),y=t(22631),N=t(57485),b=t(61994);let w=[{name:"Dashboard",href:"/agent/dashboard",icon:c.Z,iconActive:f.Z},{name:"Conversations",href:"/agent/conversations",icon:o.Z,iconActive:g.Z,badge:3},{name:"Leads",href:"/agent/leads",icon:d.Z,iconActive:j.Z},{name:"Analytics",href:"/agent/analytics",icon:m.Z,iconActive:v.Z},{name:"Testing",href:"/agent/testing",icon:x.Z,iconActive:p.Z},{name:"Integrations",href:"/agent/integrations",icon:h.Z,iconActive:y.Z},{name:"Settings",href:"/agent/settings",icon:u.Z,iconActive:N.Z}];function Z(){var e;let s=(0,n.usePathname)(),{user:t}=(0,a.a)(),[c,o]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:(0,b.Z)("bg-white border-r border-gray-200 flex flex-col transition-all duration-300",c?"w-16":"w-64"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[!c&&(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,r.jsx)("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"PropertyHub"})]}),(0,r.jsx)("button",{onClick:()=>o(!c),className:"p-1.5 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),!c&&(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"h-10 w-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-primary-700",children:(null==t?void 0:null===(e=t.full_name)||void 0===e?void 0:e.charAt(0))||"A"})}),(0,r.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:(null==t?void 0:t.full_name)||"Agent"}),(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)("div",{className:"status-dot status-online"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Online"})]})]})]})}),(0,r.jsx)("nav",{className:"flex-1 p-4 space-y-1",children:w.map(e=>{let t=s===e.href,a=t?e.iconActive:e.icon;return(0,r.jsxs)(i.default,{href:e.href,className:(0,b.Z)("nav-item",t?"nav-item-active":"nav-item-inactive",c?"justify-center":"justify-start"),title:c?e.name:void 0,children:[(0,r.jsx)(a,{className:"h-5 w-5 flex-shrink-0"}),!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"ml-3",children:e.name}),e.badge&&(0,r.jsx)("span",{className:"ml-auto bg-primary-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:e.badge})]})]},e.name)})}),!c&&(0,r.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("button",{className:"w-full btn-primary text-sm py-2",children:"New Test Conversation"}),(0,r.jsx)("button",{className:"w-full btn-secondary text-sm py-2",children:"View All Leads"})]})})]})}var k=t(83080),A=t(6638),C=t(41556),S=t(23121),_=t(1442),L=t(47842),M=t(59055),T=t(16503),z=t(97439),E=t(45926),F=t(72099);function I(){var e;let{user:s,logout:t}=(0,a.a)(),{connected:n}=(0,k.s)(),{notifications:i,unreadCount:c,markAsRead:o}=(0,A.k)(),[d,m]=(0,l.useState)(""),[x,h]=(0,l.useState)(!1);return(0,r.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex-1 max-w-lg",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),console.log("Search:",d)},className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(C.Z,{className:"h-5 w-5 text-gray-400"})}),(0,r.jsx)("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-gray-50 placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 focus:bg-white sm:text-sm",placeholder:"Search leads, conversations...",value:d,onChange:e=>m(e.target.value)})]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(F.Us,{size:"sm"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>h(!x),className:"relative p-2 text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 rounded-lg",children:[(0,r.jsx)(S.Z,{className:"h-6 w-6"}),c>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:c>99?"99+":c})]}),x&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[(0,r.jsx)("div",{className:"p-4 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications"})}),(0,r.jsx)("div",{className:"max-h-96 overflow-y-auto",children:i.length>0?i.slice(0,10).map(e=>(0,r.jsx)("div",{className:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ".concat(e.read?"":"bg-blue-50"),onClick:()=>o(e.id),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(()=>{switch(e.type){case"success":return(0,r.jsx)(_.Z,{className:"h-5 w-5 text-green-500"});case"error":return(0,r.jsx)(L.Z,{className:"h-5 w-5 text-red-500"});case"warning":return(0,r.jsx)(L.Z,{className:"h-5 w-5 text-yellow-500"});default:return(0,r.jsx)(M.Z,{className:"h-5 w-5 text-blue-500"})}})(),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.message}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:e.timestamp.toLocaleTimeString()})]}),!e.read&&(0,r.jsx)("div",{className:"h-2 w-2 bg-blue-500 rounded-full"})]})},e.id)):(0,r.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No notifications"})})]})]}),(0,r.jsxs)(z.v2,{as:"div",className:"relative",children:[(0,r.jsxs)(z.v2.Button,{className:"flex items-center text-sm rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:[(0,r.jsx)("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-sm font-medium text-primary-700",children:(null==s?void 0:null===(e=s.full_name)||void 0===e?void 0:e.charAt(0))||"A"})}),(0,r.jsxs)("div",{className:"ml-3 text-left",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:(null==s?void 0:s.full_name)||"Agent"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:null==s?void 0:s.email})]})]}),(0,r.jsx)(E.u,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:(0,r.jsxs)(z.v2.Items,{className:"absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-lg bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,r.jsx)(z.v2.Item,{children:e=>{let{active:s}=e;return(0,r.jsxs)("a",{href:"/agent/settings",className:(0,b.Z)(s?"bg-gray-100":"","flex items-center px-4 py-2 text-sm text-gray-700"),children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-3"}),"Settings"]})}}),(0,r.jsx)(z.v2.Item,{children:e=>{let{active:s}=e;return(0,r.jsxs)("button",{onClick:t,className:(0,b.Z)(s?"bg-gray-100":"","flex items-center w-full px-4 py-2 text-sm text-gray-700"),children:[(0,r.jsx)(T.Z,{className:"h-4 w-4 mr-3"}),"Sign out"]})}})]})})]})]})]})})}var B=t(85012);function O(e){let{children:s}=e,{user:t,loading:i,isAuthenticated:c,isAgent:o}=(0,a.a)(),d=(0,n.useRouter)();return((0,l.useEffect)(()=>{if(!i){if(!c){d.push("/auth/login");return}if(!o){d.push("/admin/dashboard");return}}},[i,c,o,d]),i)?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsx)(B.TK,{size:"lg"})}):c&&o?(0,r.jsxs)("div",{className:"h-screen flex bg-gray-50",children:[(0,r.jsx)(Z,{}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,r.jsx)(I,{}),(0,r.jsx)("main",{className:"flex-1 overflow-y-auto",children:(0,r.jsx)("div",{className:"p-6",children:s})})]})]}):null}}},function(e){e.O(0,[216,592,744],function(){return e(e.s=48564)}),_N_E=e.O()}]);